## 쿠키
### 브라우저에 저장되는 정보
쿠키는 브라우저에 저장되는 작은 텍스트 조각이다. 즉, 사용자가 갖고 있는 정보  
쿠키는 당사자 뿐만이 아니라 제 3자가 조회하는 것도 가능하기 때문에 개인정보를 담은 내용이나 보안상 민감한 정보는 저장하지 않는것이 좋다.

## 세션
### 서버가 사용자를 알아보는 방법
사용자는 아이디와 비밀번호를 입력하고 서버에서 받은 후에 세션아이디를 사용자의 쿠키에 저장시킨다.  
사용자는 다른 이벤트를 동작할 때 쿠키에 저장된 세션을 서버가 받아서 사용자가 누구인지 알아본 후 허가를 시켜준다.  
세션은 메모리에 적재시켜서 데이터를 빠르게 확인 할수 있지만 공간이 한정적이다.
##### 세션은 로그인 여부 등 사용자와 서버의 관계가 기억되어 보존되고 있는 상태를 말한다.

## 토큰
### 세션과 다른 방식
메모리 공간을 많이 차지하는 세션 방식의 대안으로 토큰을 발급해주는 것이다. 토큰알고리즘을 통해서 유효한 토큰을 사용자에게 제공해준다.  
토큰을 쿠키에 저장하여 필요할 때마다 제시하면 서버는 토큰을 확인한 후 사용자의 요청을 허가해 주는 것이다.  
토큰 방식은 여러 기기에서 로그인되어 있는 사용자를 강제로 로그인 시켜야 할 때 이 것이 불가능하다.  
그러므로 토큰의 유효기간을 줄이는 방식이 있다.
##### 토큰 방식은 해당 서버만이 만들 수 있는 토큰을 발급함으로서 상태를 저장하지 않고도 사용자의 로그인 여부를 파악할 수 있다.

![image](https://user-images.githubusercontent.com/64400738/223934619-d7d13aec-ae92-4935-b7c0-73f15e0be200.png)

## 캐시(cache)
한 번 전송받은 데이터는 저장해 놨다가 다시 사용할 때 꺼내 쓴다면 반복적으로 서버에 데이터 전송을 요청 할필요가 없다. 이때 사용되는 기술이 캐시.  
캐시는 사용자가 같은 사이트를 다시 방문하거나 콘텐츠를 다시 시청할 때 통신비를 지출하지 않고 로딩없이 이용이 가능하다.  
##### 쿠키와 캐시의 차이 : 쿠키는 사용자의 수고를 덜어주는데 목적, 캐시는 데이터의 전송량을 줄이고 서비스 이용 속도를 높이는데 목적

## CDN
여러 지역에 설치된 캐시 서버들을 사용하여 사용자에게 가장 가까운 캐시 서버에 요청을 하는 분산 처리 서비스.  
CDN을 사용하면 본 서버는 캐시 서버에 데이터를 한 번씩만 전송하면 된다.  
대량의 데이터를 전송하는 서비스, 대형 동영상 서비스에는 필수.  
##### AWS는 전 세계 캐시 서버를 운영하는 대표적은 CDN 업체


=================================================================================================  
  
## 쿠키 동작방식
### 구성요소
- 이름
- 값
- 유효시간
- 도메인
  - 보안때문에 쿠키의 도메인이 쿠키를 생성한 도메인을 벗어나려고 하면 브라우저는 쿠키를 저장하지 않는다.
### 동작방식
- 쿠키 생성 단계
  - 생성한 쿠키를 응답데이터의 헤더에 저장하여 브라우저에 전송
    1) request 날림
    2) 서버가 response 시점에서 setCookieHeader를 통해 response를 함
    3) 브라우저가 응답 header를 보고 쿠키 생성
- 쿠키 저장 단계
  - 브라우저는 응답데이터에 포함된 쿠키를 쿠키 저장소에 보관
  - 쿠키 종류에 따라 메모리나 파일에 저장
- 쿠키 전송 단계
  - 브라우저는 저장한 쿠키를 요청이 있을때마다 서버에 전송(유효할때 까지)
  - 사용자가 서버에 요청할때마다 요청한 url에 맞는 쿠키 확인 후 던짐

### 쿠키 설정
1. 쿠키 객체 생성
  - Cookie cookie = new Cookie("key", "value");
  - 아스키 문자 사용가능
  - 한글을 사용시에는 인코딩 처리 해줘야한다
2. 지속시간 설정
  - cookie.setMaxAge(60 * 60 * 24)  // 24시간
  - 초단위로 설정
  - 지정하지 않으면 브라우저 종료시에 쿠키 삭제
  - 삭제 시에는 setMaxAge(0);
3. 응답헤더에 쿠키 추가
  - response.addCookie(cookie);

## 세션 동작방식
### 세션 생성 방법
- HttpSession session - request.getSession(boolean);
  - true: 세션이 존재하지 않으면 새로 생성 (defult)
  - false: 세션이 존재하지 않으면 null 리턴
### 세션 삭제 방법
- invalidate()
- setMaxInactiveInterval(int interval) 메서드 사용
  - 일정시간 요청 없으면 삭제 (cookie maxAge와 비슷)
- web.xml에 설정 (분단위로 설정)
